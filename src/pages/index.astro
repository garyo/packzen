---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="PackZen - Travel Packing Made Easy">
  <!-- Redirect logged-in users to dashboard -->
  <script>
    import { isSignedIn } from '../lib/clerk';

    // Hide content during auth check to prevent flash
    document.body.style.visibility = 'hidden';

    (async () => {
      try {
        if (await isSignedIn()) {
          // Use replace to avoid back button returning to landing page
          window.location.replace('/dashboard');
          return;
        }
      } catch (error) {
        console.error('Auth check failed:', error);
        // Fail open - show landing page
      }

      // Not signed in, show landing page
      document.body.style.visibility = 'visible';
    })();
  </script>

  <div class="min-h-screen bg-gradient-to-b from-blue-50 to-white">
    <!-- Hero Section -->
    <div class="container mx-auto px-4 py-16">
      <div class="mx-auto max-w-3xl text-center">
        <img src="/logo.png" alt="PackZen" class="mx-auto mb-8 w-64" />
        <h1 class="mb-6 text-5xl font-bold text-gray-900 md:text-6xl">
          Pack Smarter,<br />Travel Better
        </h1>
        <p class="mb-8 text-xl text-gray-600">
          The mobile-first packing list app that helps you organize your trips, track your bags, and
          never forget an item again.
        </p>

        <div class="flex flex-col justify-center gap-4 sm:flex-row">
          <a
            href="/sign-up"
            class="inline-flex items-center justify-center rounded-lg bg-blue-600 px-8 py-4 text-lg font-semibold text-white transition-colors hover:bg-blue-700"
          >
            Get Started Free
          </a>
          <a
            href="/sign-in"
            class="inline-flex items-center justify-center rounded-lg border-2 border-blue-600 bg-white px-8 py-4 text-lg font-semibold text-blue-600 transition-colors hover:bg-blue-50"
          >
            Sign In
          </a>
        </div>
      </div>

      <!-- Features -->
      <div class="mx-auto mt-24 grid max-w-5xl gap-8 md:grid-cols-3">
        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ“</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">All Items</h3>
          <p class="text-gray-600">
            Build your perfect packing list once, reuse it for every trip. Organized by categories
            for easy browsing. Automatically remembers everything you pack.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ§³</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Bag Organization</h3>
          <p class="text-gray-600">
            Assign items to specific bags (carry-on, checked, personal). Containers within bags keep
            things organized. Know exactly what goes where.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">âœ…</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Pack & Track</h3>
          <p class="text-gray-600">
            Add items quickly. Check off items as you pack. See your progress at a glance. Never
            leave anything behind.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ“±</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Mobile First</h3>
          <p class="text-gray-600">
            Designed for your phone with large touch targets. Perfect for packing on the go.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ”„</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Multi-Device Sync</h3>
          <p class="text-gray-600">
            Access your lists from any device. You can start on your laptop and finish on your
            phone.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸš€</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Lightning Fast</h3>
          <p class="text-gray-600">
            Built on Cloudflare's edge network. Blazing fast from anywhere in the world.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ”“</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">You Own Your Data</h3>
          <p class="text-gray-600">
            Export full backups anytime. Move to a new service whenever you want. Zero lock-in.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ“š</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Built-in Templates</h3>
          <p class="text-gray-600">
            Start with curated packing lists for different trip types. Customize to fit your needs.
          </p>
        </div>

        <div class="rounded-lg bg-white p-6 shadow-md">
          <div class="mb-4 text-4xl">ğŸ–¨ï¸</div>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">Print & Share</h3>
          <p class="text-gray-600">
            Print your packing list or export as YAML. Share with travel companions.
          </p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-24 border-t border-gray-200 py-8">
      <div class="container mx-auto px-4 text-center text-gray-600">
        <p>Built with Astro, Solid.js, Tailwind CSS, and Cloudflare</p>
      </div>
    </footer>
  </div>
</BaseLayout>
